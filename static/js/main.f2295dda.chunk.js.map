{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["onnx","require","sess","InferenceSession","loadingModelPromise","loadModel","App","size_map","selected_columns","columns","map","group","flat","state","values","preset","cr","clear","setState","size","Header","h2","h1","Math","round","this","h5","onChange","event","changePreset","value","placeholder","monsters","names","name","i","Option","toString","onClick","Container","gap","justify","column","input","indexOf","changeEvent","checked","id","undefined","Object","keys","type","xs","md","href","color","target","predict","idx","parseInt","forEach","data","includes","push","parseFloat","tensor","Tensor","Float32Array","length","run","then","outputMap","predictions","next","React","Component","console","log","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f2295dda.chunk.js","sourcesContent":["import './App.css'\nimport React from 'react'\nimport monsters from './monsters.json'\n\nimport {Text, Page, Select, Input, Checkbox, Grid, Divider, Link} from '@geist-ui/react'\n\nconst onnx = require('onnxjs')\nconst sess = new onnx.InferenceSession()\nconst loadingModelPromise = sess.loadModel(\"./onnx_model.onnx\")\n\nclass App extends React.Component {\n    size_map = {\n        'Tiny': 0,\n        'Small': 1,\n        'Medium': 2,\n        'Large': 3,\n        'Huge': 4,\n        'Gargantuan': 5\n    }\n    // selected_columns = ['hp', 'ac', 'speed', 'flies', 'save', 'toHit',\n    //     'str', 'dex', 'con', 'int', 'wis', 'cha', 'legendary',\n    //     'damageTags', 'conditionInflict', 'size',\n    //     'immune_cold', 'immune_acid',\n    //     'immune_lightning', 'immune_poison', 'immune_fire', 'immune_psychic',\n    //     'immune_bludgeoning', 'immune_piercing', 'immune_slashing',\n    //     'immune_necrotic', 'immune_thunder', 'immune_force', 'immune_radiant',\n    //     'resist_cold', 'resist_acid', 'resist_lightning', 'resist_poison',\n    //     'resist_fire', 'resist_psychic', 'resist_bludgeoning',\n    //     'resist_piercing', 'resist_slashing', 'resist_necrotic',\n    //     'resist_thunder', 'resist_force', 'resist_radiant']\n    selected_columns = [\n        {\n            \"title\": \"Basic\",\n            \"names\": ['HP (average)', 'Armor Class', 'Speed (max)', 'Has fly speed', 'Number of saves proficient in', 'Max + to hit']\n        },\n        {\n            \"title\": \"Attributes\",\n            \"names\": [\n                'Str', 'Dex', 'Con', 'Int', 'Wis', 'Cha', 'Legendary',\n                'Unique damage types inflicted', 'Unique conditions inflicted', 'Size'\n            ]\n        },\n        {\n            \"title\": \"Immunities\",\n            \"names\": [\n                'Immune to cold damage', 'Immune to acid damage',\n                'Immune to lightning damage', 'Immune to poison damage', 'Immune to fire damage', 'Immune to psychic damage',\n                'Immune to bludgeoning damage', 'Immune to piercing damage', 'Immune to slashing damage',\n                'Immune to necrotic damage', 'Immune to thunder damage', 'Immune to force damage', 'Immune to radiant damage',\n            ]\n        },\n        {\n            \"title\": \"Resistances\",\n            \"names\": [\n                'Resistance to cold damage', 'Resistance to acid damage', 'Resistance to lightning damage', 'Resistance to poison damage',\n                'Resistance to fire damage', 'Resistance to psychic damage', 'Resistance to bludgeoning damage',\n                'Resistance to piercing damage', 'Resistance to slashing damage', 'Resistance to necrotic damage',\n                'Resistance to thunder damage', 'Resistance to force damage', 'Resistance to radiant damage']\n        }\n    ]\n    columns = this.selected_columns.map((group) => group[\"names\"]).flat(1)\n    state = {\n        values: {},\n        preset: null,\n        cr: 0\n    }\n\n    render() {\n        return (\n            <Page size=\"mini\">\n                <Page.Header>\n                    <Text h2>Neural Challenge Rating</Text>\n                </Page.Header>\n                <Text h1>{Math.round(this.state.cr)}</Text>\n                <Text h5>predicted challenge rating</Text>\n                <Divider/>\n                <Select onChange={(event) => this.changePreset(event)}\n                        value={this.state.preset} placeholder=\"Select SRD monster preset...\">\n                    {monsters.names.map((name, i) => <Select.Option value={i.toString()}>{name}</Select.Option>)}\n                </Select>\n                <button onClick={this.clear}>Clear</button>\n                {this.selected_columns.map((group) => {\n                    return <>\n                        <Divider>{group[\"title\"]}</Divider>\n                        <Grid.Container gap={2} justify=\"center\">\n                            {group[\"names\"].map((column) => {\n                                let input\n                                if ([\"Has fly speed\", \"Legendary\"].indexOf(column) !== -1\n                                    || column.indexOf(\"Resist\") !== -1\n                                    || column.indexOf(\"Immune\") !== -1) {\n                                    input = <Checkbox name={column}\n                                                      onChange={(event) =>\n                                                          this.changeEvent(event, column)}\n                                                      checked={this.state.values[column]}/>\n                                } else if (column === \"Size\") {\n                                    input = <Select id=\"size\" name=\"size\" onChange={(event) =>\n                                        this.changeEvent(event, column)}\n                                                    value={this.state.values[column] === undefined ? \"0\" : this.state.values[column].toString()}>\n                                        {Object.keys(this.size_map).map((size) => {\n                                            return <Select.Option\n                                                value={this.size_map[size].toString()}>{size}</Select.Option>\n                                        })}\n                                    </Select>\n                                } else {\n                                    input = <Input name={column} type={\"number\"} onChange={(event) =>\n                                        this.changeEvent(event, column)}\n                                                   value={this.state.values[column] === undefined ? 0 : this.state.values[column]}/>\n                                }\n                                return <Grid xs={24} md={12} key={column}>\n                                    <Grid xs key={\"column\"}>{column}</Grid>\n                                    <Grid xs key={\"input\"}>{input}</Grid>\n                                </Grid>\n                            })}\n\n                        </Grid.Container>\n                    </>\n                })}\n\n                <Divider/>\n                <Text>Made by <Link href={\"https://twitter.com/Sciguymjm\"} color>Matthew Mage</Link></Text>\n            </Page>\n        )\n    }\n\n    changeEvent(event, column) {\n        const {values} = this.state\n        if (event.target.checked !== undefined) {\n            values[column] = event.target.checked\n        } else {\n            values[column] = event.target.value\n        }\n        this.setState({values}, () => {\n            this.predict()\n        })\n    }\n\n    changePreset(event) {\n        if (event === null)\n            return\n        const idx = parseInt(event)\n        if (idx === -1)\n            return\n        const values = {}\n\n        this.columns.forEach((column, i) => {\n            if ([\"flies\", \"legendary\"].indexOf(column) !== -1\n                || column.indexOf(\"resist\") !== -1\n                || column.indexOf(\"immune\") !== -1) {\n                values[column] = monsters.data[idx][i] === 1.0\n            } else {\n                values[column] = monsters.data[idx][i]\n            }\n        })\n        this.setState({values, preset: idx.toString()}, () => {\n            this.predict()\n        })\n    }\n\n    clear = () => {\n        this.setState({values: {}, preset: null, cr: 0})\n    }\n\n    predict() {\n        const {values} = this.state\n        const input = []\n        this.columns.forEach((column) => {\n            if (Object.keys(values).includes(column)) {\n                if (typeof values[column] == \"boolean\") {\n                    input.push(values[column] ? 1 : 0)\n                } else {\n                    input.push(parseFloat(values[column]))\n                }\n            } else {\n                input.push(0.0)\n            }\n        })\n        const tensor = new onnx.Tensor(new Float32Array(input), \"float32\", [1, this.columns.length])\n\n        sess.run([tensor]).then((outputMap) => {\n            const outputTensor = outputMap.values().next().value\n            const predictions = outputTensor.data\n            this.setState({cr: predictions})\n        })\n\n    }\n}\n\nloadingModelPromise.then(() => {\n    console.log(\"Model loaded\")\n    console.log(monsters)\n})\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport {CssBaseline, GeistProvider} from '@geist-ui/react'\n\nReactDOM.render(\n    <React.StrictMode>\n        <GeistProvider>\n            <CssBaseline/>\n            <App/>\n        </GeistProvider>\n    </React.StrictMode>,\n    document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}